<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:fx="http://ns.adobe.com/mxml/2009" 
		   xmlns:s="library://ns.adobe.com/flex/spark" 
		   xmlns:mx="library://ns.adobe.com/flex/mx"
		   horizontalScrollPolicy="off" verticalScrollPolicy="off" 
		   width="100%"  click="group1_clickHandler(event)" xmlns:combo="com.flexutil.ui.combo.*"
		   >
	<fx:Metadata>
		[Event(name="change", type="flash.events.Event")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.CloseEvent;
			import mx.events.DropdownEvent;
			import mx.events.FlexEvent;
			import mx.events.ListEvent;
			
			[Bindable] public var selectedValue:String;
			[Bindable] public var selectedItem:Object;
			
			[Bindable] public var labelField:String;
			[Bindable] public var dropDownWidth:int=120;
			
			[Bindable] public var dataProvider:ArrayCollection;
			
			[Bindable] public var dataProperty:String='code';
			
			[Bindable] public var editable:Boolean = true;
			
			
			[Bindable] private var labelText:String;
			
			
			protected function group1_clickHandler(event:MouseEvent):void
			{
				if(editable)
				{
					lbl.visible = false;
					valueCbo.visible = !lbl.visible;
					valueCbo.open();
					valueCbo.setFocus();
				}
			}
			protected function valueCbo_changeHandler(event:Event):void
			{
				selectedItem = valueCbo.selectedItem;
				dispatchEvent(event);
			}
			protected function valueClose_changeHandler(event:DropdownEvent):void
			{
				/* 				labelText = valueCbo.selectedItem[valueCbo.labelField]; */
				lbl.visible = true;
				valueCbo.visible = !lbl.visible;
				this.parentDocument.setFocus();
			}


		]]>
	</fx:Script>
	<fx:Declarations>
		
	</fx:Declarations>
	<!--Ignore the warning in the below line:-->
	<!--DT: 03-Nov-2011 : Rendering Issue: The label is resetting to first selectedItem
						 so need to check the selectedValue before assigning to label-->
	<mx:Label id="lbl" text="{valueCbo.selectedValue!=null?valueCbo.selectedItem[valueCbo.labelField]:''}" 
			  textAlign="left" left="5"
			  verticalCenter="0" width="{width}"/>
	<combo:ValueComboBox  id="valueCbo" dataProvider="{dataProvider}"  dataProperty="{dataProperty}" 
						  visible="false"  verticalCenter="0" width="{width}"
						  labelField="{labelField}"	selectedValue="@{selectedValue}" 
						  close="valueClose_changeHandler(event)"  dropdownWidth="{dropDownWidth}"
						  change="valueCbo_changeHandler(event)"  />
</mx:Canvas>
