<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="100" 
		 xmlns:controls="qs.controls.*" initialize="group1_initializeHandler(event)">
	<fx:Metadata>
		
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.events.ItemClickEvent;
			/**
			 * an array of objects which should contain a label and icon
			 **/
			[Bindable] 
			public var dataProvider:Array = [ {label:'Item 1', 		icon:'assets/icons/notes.png'},
											  {label:'Item 2', 		icon:'assets/icons/notes.png'},
											  {label:'Item 3', 		icon:'assets/icons/notes.png'}
											];
			
			
			[Bindable] public var iconField:String 	= 'icon';
			[Bindable] public var labelField:String = 'label';
			
			[Bindable(event='itemClick')] 
			public var selectedIndex:int;

			[Bindable(event='itemClick')] 
			public var selectedItem:Object;
			
			private function fisheye_clickHandler(event:MouseEvent):void
			{
				selectedIndex = fisheye.selectedIndex;
				selectedItem = fisheye.selectedItem;
				
				dispatchEvent(new ItemClickEvent(ItemClickEvent.ITEM_CLICK,true,true,fisheye.selectedItem[labelField],
													fisheye.selectedIndex,fisheye,fisheye.selectedItem));
			}

			protected function group1_initializeHandler(event:FlexEvent):void
			{
				fisheye.addEventListener(MouseEvent.CLICK,fisheye_clickHandler,true,0,true)
			}

		]]>
	</fx:Script>

	
	<controls:Fisheye id="fisheye" styleName="fisheye" direction="horizontal" width="100%" height="100%"
					  dataProvider="{dataProvider}" 
					  defaultValue="normal"   horizontalAlign="center"
					  rolloverValue="hilighted"  
					  selectedValue="selected" stateProperty="currentState" 
					  unselectedValue="normal" verticalAlign="top" >
		<controls:itemRenderer>
			<fx:Component>
				<s:MXItemRenderer  >
					<s:layout>
						<s:VerticalLayout horizontalAlign="center" verticalAlign="top"/>
					</s:layout>
					<s:states>
						<s:State name="normal"/>
						<s:State name="selected"/>
						<s:State name="hilighted"/>		
					</s:states>
					<s:filters>
						<s:GlowFilter inner="false" strength="3" alpha="1.0" quality="{BitmapFilterQuality.HIGH}" knockout="false" includeIn="selected" color="#888888"/>
						<s:GlowFilter inner="false" strength="2" alpha="1.0" quality="{BitmapFilterQuality.HIGH}" knockout="false" includeIn="hilighted" color="#BBBBBB" />
					</s:filters>
					<fx:Script>
						<![CDATA[
							import flash.filters.BitmapFilterQuality;
						]]>
					</fx:Script>
					<controls:CachedLabel  color.selected="#E27C0E" color.normal="#FFFFFF"  data="{data[outerDocument.labelField]}"  
										   visible="{data &amp;&amp; data[outerDocument.labelField]}" />
					<mx:Image source="{data[outerDocument.iconField]}"  visible="{data &amp;&amp; data[outerDocument.iconField]}"/>
				</s:MXItemRenderer>
			</fx:Component>
		</controls:itemRenderer>
	</controls:Fisheye>

</s:Group>
